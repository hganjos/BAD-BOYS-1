Vis√£o Geral da Arquitetura
Esta documenta√ß√£o descreve a arquitetura completa da infraestrutura renovada, incluindo todos os componentes, suas interconex√µes e fluxos de dados.

Topologia de Rede
Segmenta√ß√£o de Rede
Internet
|
[Firewall pfSense]
|
[Mudar N√∫cleo L3]
|
‚îú‚îÄ‚îÄ VLAN 10 - Servidores (192.168.10.0/24)
‚îú‚îÄ‚îÄ VLAN 20 - Esta√ß√µes de Trabalho (192.168.20.0/24)
‚îú‚îÄ‚îÄ VLAN 30 - DMZ (192.168.30.0/24)
‚îú‚îÄ‚îÄ VLAN 40 - Monitoramento (192.168.40.0/24)
‚îî‚îÄ‚îÄ VLAN 99 - Gerenciamento (192.168.99.0/24)

Endere√ßamento IP
VLAN | Rede | Portal | Fun√ß√£o
10 | 192.168.10.0/24 | 192.168.10.1 | Servidores Cr√≠ticos
20 | 192.168.20.0/24 | 192.168.20.1 | Esta√ß√µes de Trabalho
30 | 192.168.30.0/24 | 192.168.30.1 | DMZ / Servi√ßos P√∫blicos
40 | 192.168.40.0/24 | 192.168.40.1 | Monitoramento
99 | 192.168.99.0/24 | 192.168.99.1 | Gerenciamento

Componentes da Infraestrutura

pfSense Firewall (192.168.99.10)
Fun√ß√£o: Gateway principal e firewall corporativo
WAN: Interface externa (DHCP do provedor)
LAN: 192.168.99.1
Servi√ßos:

NAT/PAT
VPN IPSec e OpenVPN
IDS/IPS com Suricata
Proxy Squid
Balanceamento de Carga

Windows Server 2022 (192.168.10.10)
Fun√ß√£o: Controlador de dom√≠nio principal
Servi√ßos:


DNS prim√°rio do Active Directory Domain Services
DHCP para VLANs corporativas Autoridade de Certifica√ß√£o
de Gerenciamento de Pol√≠tica de Grupo Servi√ßos de Atualiza√ß√£o do Windows (WSUS)


Servidor Debian (192.168.10.20)
Fun√ß√£o: Servidor Linux para servi√ßos complementares
Servi√ßos:

DNS secund√°rio (BIND9)
Backup DHCP (ISC-DHCP)
Servidor NTP
Syslog centralizado
Servidor de arquivos (Samba)

Ubuntu Server (192.168.10.30)
Fun√ß√£o: Plataforma de containeriza√ß√£o
Servi√ßos:

Docker Engine
Portainer (gerenciamento de containers)
GitLab CE (DevOps)
Nextcloud (compartilhamento de arquivos)
Grafana (dashboards)

Gerente Wazuh (192.168.40.10)
Fun√ß√£o: SIEM e monitoramento de seguran√ßa
Componentes:

Gerenciador de Wazuh
Elasticsearch
Kibana Dashboard
Filebeat

Monitoramento:

Logs de todos os sistemas
Detec√ß√£o de intrus√£o
Conformidade (PCI DSS, GDPR)
Avalia√ß√£o de vulnerabilidade

Kali Linux (192.168.40.20)
Fun√ß√£o: Esta√ß√£o de testes de seguran√ßa
Ferramentas:

Nmap (varredura de rede)
Metasploit (teste de penetra√ß√£o)
Burp Suite (teste de aplica√ß√£o web)
Wireshark (an√°lise de rede)
Aircrack-ng (seguran√ßa wireless)

Fluxos de Dados
Fluxo de Autentica√ß√£o
Cliente ‚Üí pfSense ‚Üí Windows Server (AD) ‚Üí Resposta ‚Üí Cliente
Fluxo de Resolu√ß√£o DNS
Cliente ‚Üí Windows Server (DNS) ‚Üí Debian (DNS secund√°rio) ‚Üí Internet ‚Üí Resposta
Fluxo de Monitoramento
Todos os Sistemas ‚Üí Wazuh Agents ‚Üí Wazuh Manager ‚Üí Elasticsearch ‚Üí Kibana
Fluxo de Logs
Sistemas ‚Üí Syslog ‚Üí Debian Server ‚Üí Wazuh ‚Üí An√°lise ‚Üí Alertas de
Seguran√ßa por Camadas
Camada 1 - Per√≠metro

pfSense Firewall: Bloqueio de tr√°fego malicioso
IDS/IPS: Detec√ß√£o e preven√ß√£o de intrus√£o
VPN: Acesso remoto seguro

Camada 2 - Rede

Segmenta√ß√£o por VLANs: Isolamento de tr√°fego
ACLs: Controle de acesso entre redes
802.1X: Autentica√ß√£o de dispositivos

Camada 3 - Sistema

Active Directory: Autentica√ß√£o centralizada
Pol√≠ticas de Grupo: Configura√ß√µes de seguran√ßa
Antiv√≠rus: Prote√ß√£o contra malware

Camada 4 - Aplica√ß√£o

Proxy Squid: Filtragem web
Autoridade Certificadora: PKI corporativa
Application Whitelisting: Controle de futuros

Camada 5 - Dados

Backup automatizado: Prote√ß√£o contra perda
Criptografia: Dados em tr√¢nsito e seguran√ßa
DLP: Preven√ß√£o de vazamento de dados

Monitoramento e Alertas
M√©tricas Coletadas

Desempenho: CPU, RAM, disco, rede
Seguran√ßa: logins com falha, detec√ß√£o de malware
Disponibilidade: tempo de atividade do servi√ßo, tempo de resposta
Conformidade: viola√ß√µes de pol√≠ticas, registros de auditoria

Pain√©is Principais

Painel Executivo: Vis√£o geral da infraestrutura
Painel de Seguran√ßa: Eventos de seguran√ßa em tempo real
Painel de Rede: Tr√°fego e desempenho de rede
Painel do Sistema: Sa√∫de dos servidores

Alertas Configurados

Cr√≠ticos: Sistema inativo, ataque detectado
Aviso: Alta utiliza√ß√£o de recursos, falha de backup
Informativo: Login de administrador, altera√ß√£o de configura√ß√£o

Automa√ß√£o com Ansible
Invent√°rio de Hosts
ini[windows]
dc01 ansible_host=192.168.10.10
ws01 ansible_host=192.168.20.10

[linux]
debian01 ansible_host=192.168.10.20
ubuntu01 ansible_host=192.168.10.30

[monitoramento]
wazuh01 ansible_host=192.168.40.10
kali01 ansible_host=192.168.40.20

[firewalls]
pfsense01 ansible_host=192.168.99.10
Playbooks Principais

site.yml: Deployment completo
update.yml: Atualiza√ß√µes de sistema
backup.yml: Rotinas de backup
security.yml: Endurecimento de seguran√ßa
monitorando.yml: Configura√ß√£o de monitoramento

üìà Escalabilidade
Crescimento Horizontal

Servidores: Adi√ß√£o de novos servidores por fun√ß√£o
Load Balancers: Distribui√ß√£o de carga
Clustering: Alta disponibilidade

Crescimento Vertical

Hardware: Atualiza√ß√£o de CPU, RAM, Armazenamento
Largura de banda: Aumento da capacidade de rede
Licenciamento: Expans√£o de licen√ßas de software

Estrat√©gia de Backup e Recupera√ß√£o de Desastres
3-2-1

3 c√≥pia dos dados cr√≠ticos
2 m√≠dias diferentes (local + nuvem)
1 c√≥pia offsite

RTO/RPO Definidos

N√≠vel 1 (Cr√≠tico): RTO 1h, RPO 15min
N√≠vel 2 (Importante): RTO 4h, RPO 1h
N√≠vel 3 (Normal): RTO 24h, RPO 4h

Testes de Recupera√ß√£o

Mensais: Restaura√ß√£o de arquivos
Trimestrais: Recupera√ß√£o de VMs
Anuais: Recupera√ß√£o de desastres completa

Frameworks de Compliance e Auditoria
Implementados

ISO 27001: Gest√£o de seguran√ßa da informa√ß√£o
NIST: Framework de cybersecurity
Controles CIS: Controles de seguran√ßa cr√≠ticos

Logs de Auditoria

Acesso: Logins, logouts, falhas de autentica√ß√£o
Mudan√ßas: Altera√ß√µes de configura√ß√£o, atualiza√ß√£o
Dados: Acesso a arquivos sens√≠veis, transfer√™ncias

Relat√≥rios Autom√°ticos

Di√°rios: Status dos sistemas, alertas cr√≠ticos
Semanais: An√°lise de tend√™ncias, desempenho
Mensais: Compliance, vulnerabilidades, an√°lises
